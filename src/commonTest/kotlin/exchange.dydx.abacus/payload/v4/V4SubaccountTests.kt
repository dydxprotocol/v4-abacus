package exchange.dydx.abacus.payload.v4

import exchange.dydx.abacus.calculator.CalculationPeriod
import exchange.dydx.abacus.responses.StateResponse
import exchange.dydx.abacus.state.app.adaptors.AbUrl
import exchange.dydx.abacus.tests.extensions.rest
import exchange.dydx.abacus.tests.extensions.socket
import exchange.dydx.abacus.utils.ServerTime
import indexer.codegen.IndexerPerpetualPositionStatus
import kotlin.test.Test
import kotlin.test.assertEquals

class V4SubaccountTests : V4BaseTests() {
    @Test
    fun testDataFeed() {
        // Due to the JIT compiler nature for JVM (and Kotlin) and JS, Android/web would ran slow the first round. Second round give more accurate result
        setup()

        print("--------First round----------\n")

        testAccountsOnce()
    }

    override fun loadMarkets(): StateResponse {
        return test({
            perp.socket(mock.socketUrl, mock.marketsChannel.subscribed_2, 0, null)
        }, null)
    }

    private fun testAccountsOnce() {
        var time = ServerTime.now()
        testSubaccountsReceived()
        testSubaccountSubscribed()
        // This is a complete test with real payload.
        testSubaccountChanged1()
        testSubaccountChangedWithFills1()
    }

    private fun testSubaccountsReceived() {
        if (perp.staticTyping) {
            perp.rest(
                url = AbUrl.fromString("$testRestUrl/v4/addresses/cosmo"),
                payload = mock.batchedSubaccountsChannel.rest_response,
                subaccountNumber = 0,
                height = null,
            )

            val account = perp.internalState.wallet.account
            assertEquals(account.tradingRewards.total, 36059.40741180069)
            val subaccount = account.subaccounts[0]!!
            val calculated = subaccount.calculated[CalculationPeriod.current]
            assertEquals(calculated?.equity, 623694.7306634021)
            assertEquals(calculated?.freeCollateral, 485562.68948613136)
            assertEquals(calculated?.quoteBalance, 1625586.093553)
        } else {
            test(
                {
                    perp.rest(
                        AbUrl.fromString("$testRestUrl/v4/addresses/cosmo"),
                        mock.batchedSubaccountsChannel.rest_response,
                        0,
                        null,
                    )
                },
                """
                {
                   "wallet":{
                      "account":{
                         "tradingRewards":{
                            "total":36059.41
                         },
                         "subaccounts":{
                            "0":{
                               "equity":{
                                  "current":623694.731
                               },
                               "freeCollateral":{
                                  "current":485562.689
                               },
                               "quoteBalance":{
                                  "current":1625586.094
                               }
                            }
                         }
                      }
                   }
                }
                """.trimIndent(),
            )
        }
    }

    private fun testSubaccountSubscribed() {
        if (perp.staticTyping) {
            perp.socket(
                url = testWsUrl,
                jsonString = mock.batchedSubaccountsChannel.subscribed,
                subaccountNumber = 0,
                height = null,
            )

            val account = perp.internalState.wallet.account
            assertEquals(account.tradingRewards.total, 36059.40741180069)
            val subaccount = account.subaccounts[0]!!
            val calculated = subaccount.calculated[CalculationPeriod.current]
            assertEquals(calculated?.equity, 623694.7306634021)
            assertEquals(calculated?.freeCollateral, 485562.68948613136)
            assertEquals(calculated?.quoteBalance, 1625586.093553)
        } else {
            test(
                {
                    perp.socket(
                        testWsUrl,
                        mock.batchedSubaccountsChannel.subscribed,
                        0,
                        null,
                    )
                },
                """
                {
                    "wallet": {
                        "account": {
                            "tradingRewards": {
                                "total": 36059.41
                            },
                            "subaccounts": {
                                "0": {
                                    "equity": {
                                        "current": 623694.731
                                    },
                                    "freeCollateral": {
                                        "current": 485562.689
                                    },
                                    "quoteBalance": {
                                        "current": 1625586.094
                                    },
                                    "orders": {
                                    },
                                    "openPositions": {
                                    }
                                }
                            }
                        }
                    }
                }
                """.trimIndent(),
            )
        }
    }

    private fun testSubaccountChanged1() {
        if (perp.staticTyping) {
            perp.socket(
                url = testWsUrl,
                jsonString = mock.batchedSubaccountsChannel.channel_batch_data_1,
                subaccountNumber = 0,
                height = null,
            )

            val account = perp.internalState.wallet.account
            assertEquals(account.tradingRewards.total, 36059.40741180069)
            val subaccount = account.subaccounts[0]!!
            val calculated = subaccount.calculated[CalculationPeriod.current]
            assertEquals(calculated?.equity, 623694.7306634021)
            assertEquals(calculated?.freeCollateral, 485562.68948613136)
            assertEquals(calculated?.quoteBalance, 1625586.093553)
        } else {
            test(
                {
                    perp.socket(
                        testWsUrl,
                        mock.batchedSubaccountsChannel.channel_batch_data_1,
                        0,
                        null,
                    )
                },
                """
                {
                   "wallet":{
                      "account":{
                         "tradingRewards":{
                            "total":36059.41
                         },
                         "subaccounts":{
                            "0":{
                               "equity":{
                                  "current":623694.731
                               },
                               "freeCollateral":{
                                  "current":485562.689
                               },
                               "quoteBalance":{
                                  "current":1625586.094
                               },
                               "orders":{
                                  "b272a57f-b0df-5c77-b8f0-4ed52db72701":{
                                     "id":"b272a57f-b0df-5c77-b8f0-4ed52db72701",
                                     "clientId":"24788436",
                                     "clobPairId":"52",
                                     "side":"BUY",
                                     "size":"5623",
                                     "totalFilled":"0",
                                     "price":"2.19",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968042",
                                     "marketId":"IMX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "e9301261-eb3c-5758-bab5-e5b0be498a2d":{
                                     "id":"e9301261-eb3c-5758-bab5-e5b0be498a2d",
                                     "clientId":"34294435",
                                     "clobPairId":"61",
                                     "side":"BUY",
                                     "size":"4683",
                                     "totalFilled":"0",
                                     "price":"2.804",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968041",
                                     "marketId":"SNX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "3e05617b-01c9-5e80-ab6d-dfb63c9cf56a":{
                                     "id":"3e05617b-01c9-5e80-ab6d-dfb63c9cf56a",
                                     "clientId":"34294436",
                                     "clobPairId":"61",
                                     "side":"SELL",
                                     "size":"4683",
                                     "totalFilled":"0",
                                     "price":"2.828",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968041",
                                     "marketId":"SNX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c76242b8-495e-5d8b-9710-7d41e2aab9cc":{
                                     "id":"c76242b8-495e-5d8b-9710-7d41e2aab9cc",
                                     "clientId":"34294437",
                                     "clobPairId":"30",
                                     "side":"SELL",
                                     "size":"618000000",
                                     "totalFilled":"0",
                                     "price":"0.000024335",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968041",
                                     "marketId":"SHIB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "797d6c86-7bf7-52e5-a22d-89d1c18b5bf7":{
                                     "id":"797d6c86-7bf7-52e5-a22d-89d1c18b5bf7",
                                     "clientId":"64000686",
                                     "clobPairId":"23",
                                     "side":"SELL",
                                     "size":"1646",
                                     "totalFilled":"0",
                                     "price":"9.158",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968039",
                                     "marketId":"APT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "3dc35e0b-c5a9-58e7-a8ed-38e12485f532":{
                                     "id":"3dc35e0b-c5a9-58e7-a8ed-38e12485f532",
                                     "clientId":"24788386",
                                     "clobPairId":"64",
                                     "side":"SELL",
                                     "size":"120860",
                                     "totalFilled":"0",
                                     "price":"0.1246",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968038",
                                     "marketId":"CHZ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "849360a2-4554-59d2-9e83-b75167444735":{
                                     "id":"849360a2-4554-59d2-9e83-b75167444735",
                                     "clientId":"64000672",
                                     "clobPairId":"38",
                                     "side":"SELL",
                                     "size":"3243",
                                     "totalFilled":"0",
                                     "price":"3.597",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968038",
                                     "marketId":"JTO-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "6144c93d-9d1c-5b20-a248-89a212a8c5b8":{
                                     "id":"6144c93d-9d1c-5b20-a248-89a212a8c5b8",
                                     "clientId":"63898541",
                                     "clobPairId":"43",
                                     "side":"BUY",
                                     "size":"11358",
                                     "totalFilled":"0",
                                     "price":"1.315",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968038",
                                     "marketId":"STRK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "6aab54d1-e26b-5b87-8244-18c6c1bc2687":{
                                     "id":"6aab54d1-e26b-5b87-8244-18c6c1bc2687",
                                     "clientId":"63898545",
                                     "clobPairId":"21",
                                     "side":"SELL",
                                     "size":"2492",
                                     "totalFilled":"0",
                                     "price":"6.047",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968038",
                                     "marketId":"WLD-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "0132761f-022b-59d9-966f-f00b78b36ab9":{
                                     "id":"0132761f-022b-59d9-966f-f00b78b36ab9",
                                     "clientId":"24788391",
                                     "clobPairId":"51",
                                     "side":"SELL",
                                     "size":"462.2",
                                     "totalFilled":"0",
                                     "price":"25.35",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968038",
                                     "marketId":"INJ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "aba55d53-09f0-51f9-a2c6-4cd21e6c466a":{
                                     "id":"aba55d53-09f0-51f9-a2c6-4cd21e6c466a",
                                     "clientId":"34294395",
                                     "clobPairId":"30",
                                     "side":"BUY",
                                     "size":"618000000",
                                     "totalFilled":"0",
                                     "price":"0.000024183",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"SHIB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "835218be-f7ba-587b-869d-aadc23d35f54":{
                                     "id":"835218be-f7ba-587b-869d-aadc23d35f54",
                                     "clientId":"63898532",
                                     "clobPairId":"21",
                                     "side":"BUY",
                                     "size":"2492",
                                     "totalFilled":"0",
                                     "price":"5.992",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"WLD-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "9fbb7f10-ba4d-55e8-a128-7096cef3f49e":{
                                     "id":"9fbb7f10-ba4d-55e8-a128-7096cef3f49e",
                                     "clientId":"24788433",
                                     "clobPairId":"47",
                                     "side":"BUY",
                                     "size":"198600000",
                                     "totalFilled":"0",
                                     "price":"0.00002514",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"BONK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c8c37595-016a-54ba-835a-d23f8472fdd2":{
                                     "id":"c8c37595-016a-54ba-835a-d23f8472fdd2",
                                     "clientId":"34294451",
                                     "clobPairId":"44",
                                     "side":"BUY",
                                     "size":"2120",
                                     "totalFilled":"0",
                                     "price":"2.3527",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"FET-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "494a35af-2aa4-50da-a42a-a4a5b85ffb4c":{
                                     "id":"494a35af-2aa4-50da-a42a-a4a5b85ffb4c",
                                     "clientId":"34294452",
                                     "clobPairId":"44",
                                     "side":"SELL",
                                     "size":"2120",
                                     "totalFilled":"0",
                                     "price":"2.3601",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"FET-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "930630ad-1b05-5fff-ae9c-c098f89300bf":{
                                     "id":"930630ad-1b05-5fff-ae9c-c098f89300bf",
                                     "clientId":"24788441",
                                     "clobPairId":"39",
                                     "side":"SELL",
                                     "size":"128.6",
                                     "totalFilled":"0",
                                     "price":"38.96",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"ORDI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "457b82e9-3739-5daa-878d-9c9ef3199d42":{
                                     "id":"457b82e9-3739-5daa-878d-9c9ef3199d42",
                                     "clientId":"64000725",
                                     "clobPairId":"29",
                                     "side":"BUY",
                                     "size":"9120",
                                     "totalFilled":"0",
                                     "price":"0.5467",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"SEI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "abc9a7e5-3869-5a28-8794-18bd95ffc7cf":{
                                     "id":"abc9a7e5-3869-5a28-8794-18bd95ffc7cf",
                                     "clientId":"63898584",
                                     "clobPairId":"35",
                                     "side":"BUY",
                                     "size":"13280",
                                     "totalFilled":"0",
                                     "price":"1.1242",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"JUP-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "2c2c7ed3-64fb-50dd-bdb8-f3f93c953bdf":{
                                     "id":"2c2c7ed3-64fb-50dd-bdb8-f3f93c953bdf",
                                     "clientId":"24788446",
                                     "clobPairId":"65",
                                     "side":"BUY",
                                     "size":"193",
                                     "totalFilled":"0",
                                     "price":"3.385",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"WIF-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "694fac3c-68f2-5b88-a29a-ea9e713e78a8":{
                                     "id":"694fac3c-68f2-5b88-a29a-ea9e713e78a8",
                                     "clientId":"24788447",
                                     "clobPairId":"65",
                                     "side":"SELL",
                                     "size":"193",
                                     "totalFilled":"0",
                                     "price":"3.409",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"WIF-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "1cb41cab-729e-522f-a181-326556add4cf":{
                                     "id":"1cb41cab-729e-522f-a181-326556add4cf",
                                     "clientId":"24788448",
                                     "clobPairId":"13",
                                     "side":"BUY",
                                     "size":"643",
                                     "totalFilled":"0",
                                     "price":"7.55",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"UNI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "5f1bbc51-d0e5-5d42-8c98-5d33771fb749":{
                                     "id":"5f1bbc51-d0e5-5d42-8c98-5d33771fb749",
                                     "clientId":"24788449",
                                     "clobPairId":"51",
                                     "side":"BUY",
                                     "size":"167.8",
                                     "totalFilled":"0",
                                     "price":"25.19",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968037",
                                     "marketId":"INJ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "5b64fe5a-c156-5ab1-a6ab-ab7ae32e5315":{
                                     "id":"5b64fe5a-c156-5ab1-a6ab-ab7ae32e5315",
                                     "clientId":"64000645",
                                     "clobPairId":"62",
                                     "side":"BUY",
                                     "size":"5814",
                                     "totalFilled":"0",
                                     "price":"2.57",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"ARKM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "cf855372-d414-5edb-85c5-77c3490caacd":{
                                     "id":"cf855372-d414-5edb-85c5-77c3490caacd",
                                     "clientId":"64000646",
                                     "clobPairId":"62",
                                     "side":"SELL",
                                     "size":"5814",
                                     "totalFilled":"0",
                                     "price":"2.592",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"ARKM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "0250e2a8-9c21-5f83-8068-a5a4a30a835c":{
                                     "id":"0250e2a8-9c21-5f83-8068-a5a4a30a835c",
                                     "clientId":"24788359",
                                     "clobPairId":"13",
                                     "side":"BUY",
                                     "size":"1686",
                                     "totalFilled":"0",
                                     "price":"7.531",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"UNI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "0f5c8329-5743-56eb-8b93-4ca3f3f5af40":{
                                     "id":"0f5c8329-5743-56eb-8b93-4ca3f3f5af40",
                                     "clientId":"24788362",
                                     "clobPairId":"51",
                                     "side":"BUY",
                                     "size":"442",
                                     "totalFilled":"0",
                                     "price":"25.12",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"INJ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "02f8311f-4540-53c4-a742-60d5df896131":{
                                     "id":"02f8311f-4540-53c4-a742-60d5df896131",
                                     "clientId":"64000652",
                                     "clobPairId":"23",
                                     "side":"BUY",
                                     "size":"1646",
                                     "totalFilled":"0",
                                     "price":"9.082",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"APT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "3e28124d-85d2-5a03-b01a-915defc5cba2":{
                                     "id":"3e28124d-85d2-5a03-b01a-915defc5cba2",
                                     "clientId":"24788418",
                                     "clobPairId":"13",
                                     "side":"SELL",
                                     "size":"618",
                                     "totalFilled":"0",
                                     "price":"7.571",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"UNI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "f88c5ae6-0ae2-53c7-826a-be56e7e834b5":{
                                     "id":"f88c5ae6-0ae2-53c7-826a-be56e7e834b5",
                                     "clientId":"63898566",
                                     "clobPairId":"33",
                                     "side":"SELL",
                                     "size":"246",
                                     "totalFilled":"0",
                                     "price":"10.46",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"TIA-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "54634f99-adec-5ce7-a59b-9b7fae504107":{
                                     "id":"54634f99-adec-5ce7-a59b-9b7fae504107",
                                     "clientId":"63898571",
                                     "clobPairId":"35",
                                     "side":"SELL",
                                     "size":"13280",
                                     "totalFilled":"0",
                                     "price":"1.1338",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"JUP-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "8ace4b96-3368-593b-ac51-3c61955a4d24":{
                                     "id":"8ace4b96-3368-593b-ac51-3c61955a4d24",
                                     "clientId":"63898578",
                                     "clobPairId":"21",
                                     "side":"BUY",
                                     "size":"831",
                                     "totalFilled":"0",
                                     "price":"6.008",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"WLD-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "f37eceb6-e474-5ad3-8ac2-ab31c4e77d6d":{
                                     "id":"f37eceb6-e474-5ad3-8ac2-ab31c4e77d6d",
                                     "clientId":"63898579",
                                     "clobPairId":"21",
                                     "side":"SELL",
                                     "size":"831",
                                     "totalFilled":"0",
                                     "price":"6.031",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968036",
                                     "marketId":"WLD-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "3653a053-c880-52ab-b467-12fc521efd33":{
                                     "id":"3653a053-c880-52ab-b467-12fc521efd33",
                                     "clientId":"24788342",
                                     "clobPairId":"39",
                                     "side":"SELL",
                                     "size":"385.7",
                                     "totalFilled":"0",
                                     "price":"39.06",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968035",
                                     "marketId":"ORDI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "f350d332-83d8-5963-86a4-0a57a5d04414":{
                                     "id":"f350d332-83d8-5963-86a4-0a57a5d04414",
                                     "clientId":"64000640",
                                     "clobPairId":"31",
                                     "side":"BUY",
                                     "size":"8830",
                                     "totalFilled":"0",
                                     "price":"1.0934",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968035",
                                     "marketId":"SUI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "0b49d9cf-fb6b-5a64-a27f-6c818cff3cc0":{
                                     "id":"0b49d9cf-fb6b-5a64-a27f-6c818cff3cc0",
                                     "clientId":"64000641",
                                     "clobPairId":"31",
                                     "side":"SELL",
                                     "size":"8830",
                                     "totalFilled":"0",
                                     "price":"1.1026",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968035",
                                     "marketId":"SUI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "2573586b-49a4-5f4d-b15d-6c88c56b993a":{
                                     "id":"2573586b-49a4-5f4d-b15d-6c88c56b993a",
                                     "clientId":"24788403",
                                     "clobPairId":"47",
                                     "side":"SELL",
                                     "size":"198600000",
                                     "totalFilled":"0",
                                     "price":"0.00002523",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968034",
                                     "marketId":"BONK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "55d55c5b-8a72-5e68-873c-cf85a068670b":{
                                     "id":"55d55c5b-8a72-5e68-873c-cf85a068670b",
                                     "clientId":"47686668",
                                     "clobPairId":"5",
                                     "side":"BUY",
                                     "size":"0.6",
                                     "totalFilled":"0",
                                     "price":"152.51",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968034",
                                     "marketId":"SOL-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "6e285519-1441-510a-9bf8-d219950956d0":{
                                     "id":"6e285519-1441-510a-9bf8-d219950956d0",
                                     "clientId":"47686669",
                                     "clobPairId":"5",
                                     "side":"SELL",
                                     "size":"0.6",
                                     "totalFilled":"0",
                                     "price":"153.26",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968034",
                                     "marketId":"SOL-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c4afe09c-fc11-5d53-b3c8-85c2658fabfa":{
                                     "id":"c4afe09c-fc11-5d53-b3c8-85c2658fabfa",
                                     "clientId":"24788323",
                                     "clobPairId":"39",
                                     "side":"BUY",
                                     "size":"385.7",
                                     "totalFilled":"0",
                                     "price":"38.72",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968033",
                                     "marketId":"ORDI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "b055b1e3-970f-5dde-968d-d53dab0d96c9":{
                                     "id":"b055b1e3-970f-5dde-968d-d53dab0d96c9",
                                     "clientId":"24788326",
                                     "clobPairId":"13",
                                     "side":"SELL",
                                     "size":"1607",
                                     "totalFilled":"0",
                                     "price":"7.596",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968033",
                                     "marketId":"UNI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "2bb1a534-4894-5860-ad86-4f7316b20f53":{
                                     "id":"2bb1a534-4894-5860-ad86-4f7316b20f53",
                                     "clientId":"64000673",
                                     "clobPairId":"25",
                                     "side":"BUY",
                                     "size":"12460",
                                     "totalFilled":"0",
                                     "price":"0.4003",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968033",
                                     "marketId":"BLUR-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "2819cd17-80cc-5f3b-87f0-7b1ca4372c65":{
                                     "id":"2819cd17-80cc-5f3b-87f0-7b1ca4372c65",
                                     "clientId":"64000599",
                                     "clobPairId":"38",
                                     "side":"BUY",
                                     "size":"2850",
                                     "totalFilled":"0",
                                     "price":"3.565",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968032",
                                     "marketId":"JTO-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "bb6d76d5-882b-50fe-91dc-d2f791dac9e4":{
                                     "id":"bb6d76d5-882b-50fe-91dc-d2f791dac9e4",
                                     "clientId":"24788304",
                                     "clobPairId":"52",
                                     "side":"SELL",
                                     "size":"6175",
                                     "price":"2.21",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_CANCELED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968032",
                                     "marketId":"IMX-USD",
                                     "cancelReason":"ORDER_REMOVAL_REASON_USER_CANCELED",
                                     "clientMetadata":"0"
                                  },
                                  "1ffbe4d1-0472-5842-b7b8-6e9f5cde88ad":{
                                     "id":"1ffbe4d1-0472-5842-b7b8-6e9f5cde88ad",
                                     "clientId":"34294450",
                                     "clobPairId":"42",
                                     "side":"BUY",
                                     "size":"1534",
                                     "totalFilled":"0",
                                     "price":"3.255",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968032",
                                     "marketId":"DYM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "b6b2b501-9eb2-5429-b9a0-6c7335096b02":{
                                     "id":"b6b2b501-9eb2-5429-b9a0-6c7335096b02",
                                     "clientId":"34294461",
                                     "clobPairId":"15",
                                     "side":"BUY",
                                     "size":"41900",
                                     "totalFilled":"0",
                                     "price":"0.11881",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968032",
                                     "marketId":"TRX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "bfe01f9e-d8ed-5a23-801b-1c1ca9bd3e74":{
                                     "id":"bfe01f9e-d8ed-5a23-801b-1c1ca9bd3e74",
                                     "clientId":"63898465",
                                     "clobPairId":"37",
                                     "side":"BUY",
                                     "size":"25.47",
                                     "totalFilled":"0",
                                     "price":"585.9",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"BNB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "5924526c-09b2-5ff3-9012-09f0c377f9fe":{
                                     "id":"5924526c-09b2-5ff3-9012-09f0c377f9fe",
                                     "clientId":"63898468",
                                     "clobPairId":"59",
                                     "side":"SELL",
                                     "size":"10888",
                                     "totalFilled":"0",
                                     "price":"1.382",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"AEVO-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c48b0b54-7b7f-5946-b294-8b0ffce7853c":{
                                     "id":"c48b0b54-7b7f-5946-b294-8b0ffce7853c",
                                     "clientId":"63898466",
                                     "clobPairId":"37",
                                     "side":"SELL",
                                     "size":"25.47",
                                     "totalFilled":"0",
                                     "price":"590.8",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"BNB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "a2ced4cc-fad9-507c-b5a0-3a3cdda722e6":{
                                     "id":"a2ced4cc-fad9-507c-b5a0-3a3cdda722e6",
                                     "clientId":"64000642",
                                     "clobPairId":"31",
                                     "side":"BUY",
                                     "size":"2970",
                                     "totalFilled":"0",
                                     "price":"1.0965",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"SUI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "e0e5a27c-ad3f-5d1f-b615-ad1d106ea2da":{
                                     "id":"e0e5a27c-ad3f-5d1f-b615-ad1d106ea2da",
                                     "clientId":"64000643",
                                     "clobPairId":"31",
                                     "side":"SELL",
                                     "size":"2970",
                                     "totalFilled":"0",
                                     "price":"1.0995",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"SUI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "6c48b476-dee1-5956-bb07-2136370bfde5":{
                                     "id":"6c48b476-dee1-5956-bb07-2136370bfde5",
                                     "clientId":"64000649",
                                     "clobPairId":"25",
                                     "side":"SELL",
                                     "size":"12460",
                                     "totalFilled":"0",
                                     "price":"0.4021",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"BLUR-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "5697a961-ffbb-51b6-934c-1ce813d85346":{
                                     "id":"5697a961-ffbb-51b6-934c-1ce813d85346",
                                     "clientId":"11380983",
                                     "clobPairId":"0",
                                     "side":"SELL",
                                     "size":"0.0945",
                                     "totalFilled":"0",
                                     "price":"63434",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"BTC-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "cecabdb7-b51e-5cac-9840-8537e4f5b6c8":{
                                     "id":"cecabdb7-b51e-5cac-9840-8537e4f5b6c8",
                                     "clientId":"11380984",
                                     "clobPairId":"0",
                                     "side":"BUY",
                                     "size":"0.0945",
                                     "totalFilled":"0",
                                     "price":"63393",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"BTC-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "4b73fbf2-06de-58bc-b739-37578d161d9e":{
                                     "id":"4b73fbf2-06de-58bc-b739-37578d161d9e",
                                     "clientId":"63898576",
                                     "clobPairId":"33",
                                     "side":"BUY",
                                     "size":"83",
                                     "totalFilled":"0",
                                     "price":"10.39",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968031",
                                     "marketId":"TIA-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "3c2a59dc-df03-583b-899b-aa9b3ad5c337":{
                                     "id":"3c2a59dc-df03-583b-899b-aa9b3ad5c337",
                                     "clientId":"24788274",
                                     "clobPairId":"47",
                                     "side":"BUY",
                                     "size":"570400000",
                                     "totalFilled":"0",
                                     "price":"0.00002507",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"BONK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "2a267797-d71b-57df-94bf-65f124f4f4bf":{
                                     "id":"2a267797-d71b-57df-94bf-65f124f4f4bf",
                                     "clientId":"24788275",
                                     "clobPairId":"47",
                                     "side":"SELL",
                                     "size":"570400000",
                                     "totalFilled":"0",
                                     "price":"0.0000253",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"BONK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "a6c99cc9-13fe-58e6-bbd3-8ab0286788da":{
                                     "id":"a6c99cc9-13fe-58e6-bbd3-8ab0286788da",
                                     "clientId":"63898511",
                                     "clobPairId":"37",
                                     "side":"BUY",
                                     "size":"8.48",
                                     "totalFilled":"0",
                                     "price":"587.2",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"BNB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "e94d3b37-60bd-583e-b2b2-720d4cd7fbfa":{
                                     "id":"e94d3b37-60bd-583e-b2b2-720d4cd7fbfa",
                                     "clientId":"24788347",
                                     "clobPairId":"51",
                                     "side":"SELL",
                                     "size":"144",
                                     "totalFilled":"0",
                                     "price":"25.28",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"INJ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c5364f6c-91a9-5200-90f2-23caf79ae3f0":{
                                     "id":"c5364f6c-91a9-5200-90f2-23caf79ae3f0",
                                     "clientId":"24788348",
                                     "clobPairId":"52",
                                     "side":"BUY",
                                     "size":"2188",
                                     "totalFilled":"0",
                                     "price":"2.196",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"IMX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "321ec680-c83c-5dae-af19-81fd2e588a69":{
                                     "id":"321ec680-c83c-5dae-af19-81fd2e588a69",
                                     "clientId":"34294421",
                                     "clobPairId":"15",
                                     "side":"SELL",
                                     "size":"41900",
                                     "totalFilled":"0",
                                     "price":"0.11927",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"TRX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "2ae0cb04-089e-5a63-af08-ac6a45af1feb":{
                                     "id":"2ae0cb04-089e-5a63-af08-ac6a45af1feb",
                                     "clientId":"34294426",
                                     "clobPairId":"42",
                                     "side":"SELL",
                                     "size":"1534",
                                     "totalFilled":"0",
                                     "price":"3.266",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968030",
                                     "marketId":"DYM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "e033faf1-4bec-589d-8c6a-bf584bfbe12c":{
                                     "id":"e033faf1-4bec-589d-8c6a-bf584bfbe12c",
                                     "clientId":"64000620",
                                     "clobPairId":"23",
                                     "side":"BUY",
                                     "size":"549",
                                     "totalFilled":"0",
                                     "price":"9.102",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"APT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "994c0568-d839-5180-a2d5-345f3122ae27":{
                                     "id":"994c0568-d839-5180-a2d5-345f3122ae27",
                                     "clientId":"24788327",
                                     "clobPairId":"64",
                                     "side":"SELL",
                                     "size":"40280",
                                     "totalFilled":"0",
                                     "price":"0.1242",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"CHZ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "9aeba2b8-3a32-50de-87c1-bca8662010c7":{
                                     "id":"9aeba2b8-3a32-50de-87c1-bca8662010c7",
                                     "clientId":"34294359",
                                     "clobPairId":"30",
                                     "side":"BUY",
                                     "size":"206000000",
                                     "totalFilled":"0",
                                     "price":"0.000024232",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"SHIB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "05ca6008-c54b-5747-a4a7-7247642cbe3c":{
                                     "id":"05ca6008-c54b-5747-a4a7-7247642cbe3c",
                                     "clientId":"24788334",
                                     "clobPairId":"39",
                                     "side":"BUY",
                                     "size":"128.6",
                                     "totalFilled":"0",
                                     "price":"38.83",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"ORDI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "0c3326d4-f408-5a0a-a9cd-20f638756c9a":{
                                     "id":"0c3326d4-f408-5a0a-a9cd-20f638756c9a",
                                     "clientId":"24788335",
                                     "clobPairId":"52",
                                     "side":"SELL",
                                     "size":"2140",
                                     "totalFilled":"0",
                                     "price":"2.204",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"IMX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "5bb03942-7c8f-5f81-9f4e-6cf29c3e6915":{
                                     "id":"5bb03942-7c8f-5f81-9f4e-6cf29c3e6915",
                                     "clientId":"64000624",
                                     "clobPairId":"29",
                                     "side":"SELL",
                                     "size":"9120",
                                     "totalFilled":"0",
                                     "price":"0.5491",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"SEI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "f6d28dc3-839a-5540-aa92-4b687c48e32f":{
                                     "id":"f6d28dc3-839a-5540-aa92-4b687c48e32f",
                                     "clientId":"64000627",
                                     "clobPairId":"23",
                                     "side":"SELL",
                                     "size":"549",
                                     "totalFilled":"0",
                                     "price":"9.137",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"APT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c8525a08-fdb6-5bd9-bcc8-4c7f4bd56850":{
                                     "id":"c8525a08-fdb6-5bd9-bcc8-4c7f4bd56850",
                                     "clientId":"34294367",
                                     "clobPairId":"30",
                                     "side":"SELL",
                                     "size":"206000000",
                                     "totalFilled":"0",
                                     "price":"0.000024291",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"SHIB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c96ab334-b898-552b-8e57-2246f4b10ae4":{
                                     "id":"c96ab334-b898-552b-8e57-2246f4b10ae4",
                                     "clientId":"47686568",
                                     "clobPairId":"7",
                                     "side":"BUY",
                                     "size":"65.3",
                                     "totalFilled":"0",
                                     "price":"37.47",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"AVAX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "d80b2665-d192-59fe-80db-459fe380455c":{
                                     "id":"d80b2665-d192-59fe-80db-459fe380455c",
                                     "clientId":"47686569",
                                     "clobPairId":"7",
                                     "side":"SELL",
                                     "size":"65.3",
                                     "totalFilled":"0",
                                     "price":"37.58",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"AVAX-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "4cff732e-4644-56b4-9e60-812422775fd8":{
                                     "id":"4cff732e-4644-56b4-9e60-812422775fd8",
                                     "clientId":"11380987",
                                     "clobPairId":"0",
                                     "side":"BUY",
                                     "size":"0.1419",
                                     "totalFilled":"0",
                                     "price":"63379",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"BTC-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "c5161857-a5ce-54ef-b9f1-bdb82e07a964":{
                                     "id":"c5161857-a5ce-54ef-b9f1-bdb82e07a964",
                                     "clientId":"47686679",
                                     "clobPairId":"8",
                                     "side":"BUY",
                                     "size":"196",
                                     "totalFilled":"0",
                                     "price":"6.141",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"FIL-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "e53ee137-5369-52f7-8381-304e844bf61f":{
                                     "id":"e53ee137-5369-52f7-8381-304e844bf61f",
                                     "clientId":"24788430",
                                     "clobPairId":"65",
                                     "side":"BUY",
                                     "size":"76",
                                     "totalFilled":"0",
                                     "price":"3.39",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"WIF-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "bbfd8b05-6a77-595a-8ecc-98ab860d4977":{
                                     "id":"bbfd8b05-6a77-595a-8ecc-98ab860d4977",
                                     "clientId":"63898580",
                                     "clobPairId":"21",
                                     "side":"BUY",
                                     "size":"332",
                                     "totalFilled":"0",
                                     "price":"6.016",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"WLD-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "fc9f083f-aa84-5fe7-b00a-17e5c6b80c2d":{
                                     "id":"fc9f083f-aa84-5fe7-b00a-17e5c6b80c2d",
                                     "clientId":"64000716",
                                     "clobPairId":"23",
                                     "side":"SELL",
                                     "size":"212",
                                     "totalFilled":"0",
                                     "price":"9.122",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"APT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "ad81e6ec-aa40-5a18-b6c9-62c21d0b5dcc":{
                                     "id":"ad81e6ec-aa40-5a18-b6c9-62c21d0b5dcc",
                                     "clientId":"64000715",
                                     "clobPairId":"23",
                                     "side":"BUY",
                                     "size":"212",
                                     "totalFilled":"0",
                                     "price":"9.118",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"APT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "f3591cbb-5423-596b-a7ea-8a63eef3078f":{
                                     "id":"f3591cbb-5423-596b-a7ea-8a63eef3078f",
                                     "clientId":"64000717",
                                     "clobPairId":"62",
                                     "side":"BUY",
                                     "size":"776",
                                     "totalFilled":"0",
                                     "price":"2.578",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"ARKM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "b603ef55-c8ca-5743-b566-2cf87f9fdada":{
                                     "id":"b603ef55-c8ca-5743-b566-2cf87f9fdada",
                                     "clientId":"63898581",
                                     "clobPairId":"59",
                                     "side":"SELL",
                                     "size":"1452",
                                     "totalFilled":"0",
                                     "price":"1.376",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"AEVO-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "6b7c0961-84a9-5bb3-be13-37138e7b53ff":{
                                     "id":"6b7c0961-84a9-5bb3-be13-37138e7b53ff",
                                     "clientId":"47686684",
                                     "clobPairId":"12",
                                     "side":"BUY",
                                     "size":"74",
                                     "totalFilled":"0",
                                     "price":"7.16",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"DOT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "82e5899d-328c-5d87-81a8-7afa1e21e3bc":{
                                     "id":"82e5899d-328c-5d87-81a8-7afa1e21e3bc",
                                     "clientId":"47686685",
                                     "clobPairId":"12",
                                     "side":"SELL",
                                     "size":"74",
                                     "totalFilled":"0",
                                     "price":"7.19",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"DOT-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "92397f02-8eb9-5262-b59e-c803e21777c6":{
                                     "id":"92397f02-8eb9-5262-b59e-c803e21777c6",
                                     "clientId":"24788432",
                                     "clobPairId":"39",
                                     "side":"SELL",
                                     "size":"51.4",
                                     "totalFilled":"0",
                                     "price":"38.92",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"ORDI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "0f8b7235-7830-55df-9749-fc3dbc3a8d90":{
                                     "id":"0f8b7235-7830-55df-9749-fc3dbc3a8d90",
                                     "clientId":"24788431",
                                     "clobPairId":"39",
                                     "side":"BUY",
                                     "size":"51.4",
                                     "totalFilled":"0",
                                     "price":"38.86",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"ORDI-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "d44283dd-eae8-52ab-969c-b9e7952fc4ff":{
                                     "id":"d44283dd-eae8-52ab-969c-b9e7952fc4ff",
                                     "clientId":"34294446",
                                     "clobPairId":"30",
                                     "side":"BUY",
                                     "size":"82000000",
                                     "totalFilled":"0",
                                     "price":"0.000024254",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"SHIB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "77e17250-e921-5a6b-9d81-3e671af22662":{
                                     "id":"77e17250-e921-5a6b-9d81-3e671af22662",
                                     "clientId":"34294447",
                                     "clobPairId":"30",
                                     "side":"SELL",
                                     "size":"82000000",
                                     "totalFilled":"0",
                                     "price":"0.000024267",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"SHIB-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "98e0fd7b-6e32-5d7b-a352-307088249f88":{
                                     "id":"98e0fd7b-6e32-5d7b-a352-307088249f88",
                                     "clientId":"47686687",
                                     "clobPairId":"2",
                                     "side":"SELL",
                                     "size":"67",
                                     "totalFilled":"0",
                                     "price":"14.735",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"LINK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "7de6b567-2bfe-53c1-a091-e6f742131526":{
                                     "id":"7de6b567-2bfe-53c1-a091-e6f742131526",
                                     "clientId":"47686686",
                                     "clobPairId":"2",
                                     "side":"BUY",
                                     "size":"67",
                                     "totalFilled":"0",
                                     "price":"14.732",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"LINK-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "192cc1af-2751-5346-a29e-105f085a5ecf":{
                                     "id":"192cc1af-2751-5346-a29e-105f085a5ecf",
                                     "clientId":"47686688",
                                     "clobPairId":"10",
                                     "side":"BUY",
                                     "size":"400",
                                     "totalFilled":"0",
                                     "price":"0.15673",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"DOGE-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "8246d007-b48a-5983-819d-375504e7e70d":{
                                     "id":"8246d007-b48a-5983-819d-375504e7e70d",
                                     "clientId":"34294448",
                                     "clobPairId":"42",
                                     "side":"BUY",
                                     "size":"614",
                                     "totalFilled":"0",
                                     "price":"3.26",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"DYM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "9b256840-b533-50d8-a43f-9444d1a268b7":{
                                     "id":"9b256840-b533-50d8-a43f-9444d1a268b7",
                                     "clientId":"34294449",
                                     "clobPairId":"42",
                                     "side":"SELL",
                                     "size":"614",
                                     "totalFilled":"0",
                                     "price":"3.262",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"DYM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "7d1f8fbd-3a4c-5810-a05e-fc56c11d13e8":{
                                     "id":"7d1f8fbd-3a4c-5810-a05e-fc56c11d13e8",
                                     "clientId":"24788434",
                                     "clobPairId":"64",
                                     "side":"BUY",
                                     "size":"16110",
                                     "totalFilled":"0",
                                     "price":"0.1239",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"CHZ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "ba29358e-f0e8-5fd6-9d66-6ab57bebbadc":{
                                     "id":"ba29358e-f0e8-5fd6-9d66-6ab57bebbadc",
                                     "clientId":"24788435",
                                     "clobPairId":"64",
                                     "side":"SELL",
                                     "size":"16110",
                                     "totalFilled":"0",
                                     "price":"0.1241",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"CHZ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "af7fcc6a-30db-5a51-b044-9f81956f02e7":{
                                     "id":"af7fcc6a-30db-5a51-b044-9f81956f02e7",
                                     "clientId":"47686689",
                                     "clobPairId":"16",
                                     "side":"BUY",
                                     "size":"10",
                                     "totalFilled":"0",
                                     "price":"7.255",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"NEAR-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "ed3085c8-3f8c-5e5f-a1a6-2a9b17c15866":{
                                     "id":"ed3085c8-3f8c-5e5f-a1a6-2a9b17c15866",
                                     "clientId":"64000719",
                                     "clobPairId":"38",
                                     "side":"SELL",
                                     "size":"468",
                                     "totalFilled":"0",
                                     "price":"3.583",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"JTO-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "90d3148f-8924-5a4f-93bf-d40df95b7bbd":{
                                     "id":"90d3148f-8924-5a4f-93bf-d40df95b7bbd",
                                     "clientId":"64000718",
                                     "clobPairId":"38",
                                     "side":"BUY",
                                     "size":"468",
                                     "totalFilled":"0",
                                     "price":"3.58",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"JTO-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "1efded55-12ef-5c79-a298-cda137b0dd50":{
                                     "id":"1efded55-12ef-5c79-a298-cda137b0dd50",
                                     "clientId":"47686690",
                                     "clobPairId":"53",
                                     "side":"SELL",
                                     "size":"3520",
                                     "totalFilled":"0",
                                     "price":"0.1135",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"HBAR-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "5e01a222-e0be-52d4-b6ad-277921a35e1d":{
                                     "id":"5e01a222-e0be-52d4-b6ad-277921a35e1d",
                                     "clientId":"47686691",
                                     "clobPairId":"3",
                                     "side":"SELL",
                                     "size":"690",
                                     "totalFilled":"0",
                                     "price":"0.7214",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"MATIC-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "65616ba1-8376-5e95-a4d0-7c25b80028a7":{
                                     "id":"65616ba1-8376-5e95-a4d0-7c25b80028a7",
                                     "clientId":"64000720",
                                     "clobPairId":"62",
                                     "side":"SELL",
                                     "size":"776",
                                     "totalFilled":"0",
                                     "price":"2.58",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"ARKM-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "055a99b9-427e-52ef-91f0-4e892c27ffd0":{
                                     "id":"055a99b9-427e-52ef-91f0-4e892c27ffd0",
                                     "clientId":"24788437",
                                     "clobPairId":"51",
                                     "side":"BUY",
                                     "size":"66.6",
                                     "totalFilled":"0",
                                     "price":"25.22",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"INJ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "b03dc443-96e8-5a3c-a540-cba51c9d3cef":{
                                     "id":"b03dc443-96e8-5a3c-a540-cba51c9d3cef",
                                     "clientId":"24788438",
                                     "clobPairId":"51",
                                     "side":"SELL",
                                     "size":"66.6",
                                     "totalFilled":"0",
                                     "price":"25.25",
                                     "type":"LIMIT",
                                     "status":"BEST_EFFORT_OPENED",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "goodTilBlock":"14968029",
                                     "marketId":"INJ-USD",
                                     "orderFlags":"0",
                                     "clientMetadata":"0"
                                  },
                                  "fcd701e4-6d41-5faa-b8d2-b5a1decf294c":{
                                     "id":"fcd701e4-6d41-5faa-b8d2-b5a1decf294c",
                                     "clientId":"47686710",
                                     "clobPairId":"12",
                                     "side":"BUY",
                                     "size":"77",
                                     "price":"7.16",
                                     "status":"BEST_EFFORT_OPENED",
                                     "type":"LIMIT",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968030",
                                     "marketId":"DOT-USD",
                                     "clientMetadata":"0"
                                  },
                                  "baf5bcb8-59a3-59b9-b200-900b2cd7b7ad":{
                                     "id":"baf5bcb8-59a3-59b9-b200-900b2cd7b7ad",
                                     "clientId":"47686711",
                                     "clobPairId":"12",
                                     "side":"SELL",
                                     "size":"77",
                                     "price":"7.19",
                                     "status":"BEST_EFFORT_OPENED",
                                     "type":"LIMIT",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968030",
                                     "marketId":"DOT-USD",
                                     "clientMetadata":"0"
                                  },
                                  "bcf680c6-7228-5e3d-a67f-d0653cff9f64":{
                                     "id":"bcf680c6-7228-5e3d-a67f-d0653cff9f64",
                                     "clientId":"17443054",
                                     "clobPairId":"52",
                                     "side":"SELL",
                                     "size":"545",
                                     "price":"2.201",
                                     "type":"LIMIT",
                                     "status":"PENDING",
                                     "timeInForce":"IOC",
                                     "postOnly":false,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968030",
                                     "marketId":"IMX-USD",
                                     "cancelReason":"ORDER_REMOVAL_REASON_IMMEDIATE_OR_CANCEL_WOULD_REST_ON_BOOK",
                                     "clientMetadata":"0"
                                  },
                                  "bb433f54-2105-5c39-b38e-2f4ce1c94c3d":{
                                     "id":"bb433f54-2105-5c39-b38e-2f4ce1c94c3d",
                                     "clientId":"37238037",
                                     "clobPairId":"32",
                                     "side":"SELL",
                                     "size":"3540",
                                     "price":"0.5649",
                                     "type":"LIMIT",
                                     "status":"PENDING",
                                     "timeInForce":"IOC",
                                     "postOnly":false,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968030",
                                     "marketId":"XRP-USD",
                                     "cancelReason":"ORDER_REMOVAL_REASON_IMMEDIATE_OR_CANCEL_WOULD_REST_ON_BOOK",
                                     "clientMetadata":"0"
                                  },
                                  "bcdcdd44-c2fa-5e5a-95c3-c74fbb8d9da7":{
                                     "id":"bcdcdd44-c2fa-5e5a-95c3-c74fbb8d9da7",
                                     "clientId":"34294462",
                                     "clobPairId":"15",
                                     "side":"BUY",
                                     "size":"125900",
                                     "price":"0.11855",
                                     "status":"BEST_EFFORT_OPENED",
                                     "type":"LIMIT",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968038",
                                     "marketId":"TRX-USD",
                                     "clientMetadata":"0"
                                  },
                                  "ad9b99e9-451e-5dda-b6ae-8a5697a4a8f5":{
                                     "id":"ad9b99e9-451e-5dda-b6ae-8a5697a4a8f5",
                                     "clientId":"34294463",
                                     "clobPairId":"15",
                                     "side":"SELL",
                                     "size":"125900",
                                     "price":"0.11953",
                                     "status":"BEST_EFFORT_OPENED",
                                     "type":"LIMIT",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968038",
                                     "marketId":"TRX-USD",
                                     "clientMetadata":"0"
                                  },
                                  "c189db80-1aa7-5442-aba5-1ab64f99da3c":{
                                     "id":"c189db80-1aa7-5442-aba5-1ab64f99da3c",
                                     "clientId":"47686712",
                                     "clobPairId":"16",
                                     "side":"SELL",
                                     "size":"10",
                                     "price":"7.277",
                                     "status":"BEST_EFFORT_OPENED",
                                     "type":"LIMIT",
                                     "timeInForce":"GTT",
                                     "postOnly":true,
                                     "reduceOnly":false,
                                     "orderFlags":"0",
                                     "goodTilBlock":"14968030",
                                     "marketId":"NEAR-USD",
                                     "clientMetadata":"0"
                                  }
                               },
                               "openPositions":{
                                  
                               }
                            }
                         }
                      }
                   }
                }
                """.trimIndent(),
            )
        }
    }

    private fun testSubaccountChangedWithFills1() {
        if (perp.staticTyping) {
            perp.socket(
                url = testWsUrl,
                jsonString = mock.batchedSubaccountsChannel.channel_batch_data_order_filled_1,
                subaccountNumber = 0,
                height = null,
            )

            val account = perp.internalState.wallet.account
            assertEquals(account.tradingRewards.total, 36059.40741180069)
            val subaccount = account.subaccounts[0]!!
            val calculated = subaccount.calculated[CalculationPeriod.current]
            assertEquals(calculated?.quoteBalance, 1599696.370275)
            val openPositions = subaccount.openPositions
            assertEquals(openPositions?.size, 42)
            val aptPosition = openPositions?.get("APT-USD")
            assertEquals(aptPosition?.status, IndexerPerpetualPositionStatus.OPEN)
            assertEquals(aptPosition?.calculated?.get(CalculationPeriod.current)?.size, -2776.0)
            assertEquals(aptPosition?.entryPrice, 9.129870549819497)
            assertEquals(aptPosition?.exitPrice, 9.132496184181717)
            assertEquals(aptPosition?.netFunding, 4.708773)
            assertEquals(aptPosition?.maxSize, -42.0)

            val fills = subaccount.fills
            assertEquals(fills?.size, 2)
        } else {
            test(
                {
                    perp.socket(
                        testWsUrl,
                        mock.batchedSubaccountsChannel.channel_batch_data_order_filled_1,
                        0,
                        null,
                    )
                },
                """
                {
                    "wallet": {
                        "account": {
                            "tradingRewards": {
                                "total": 36059.41
                            },
                            "subaccounts": {
                                "0": {
                                    "equity": {
                                    },
                                    "freeCollateral": {
                                    },
                                    "quoteBalance": {
                                        "current": 1599696.37
                                    },
                                    "orders": {
                                    },
                                    "openPositions": {
                                        "APT-USD": {
                                            "id": "APT-USD",
                                            "status":"OPEN",
                                            "size":{
                                                "current": -2776.0
                                            },
                                            "maxSize":-42.0,
                                            "netFunding":4.708773,
                                            "entryPrice":{
                                                "current": 9.13
                                            },
                                            "exitPrice":9.132496184181717
                                         }
                                    },
                                    "fills":[
                                         {
                                            "id":"a74830f8-d506-54b3-bf3b-1de791b8fe4e",
                                            "fee":"-0.067364",
                                            "side":"BUY",
                                            "size":"82",
                                            "type":"LIMIT",
                                            "price":"9.128",
                                            "orderId":"f7c9cd24-57cd-5240-a98d-3c9c3c11767d",
                                            "createdAt":"2024-05-06T18:41:20.606Z",
                                            "liquidity":"MAKER",
                                            "clientMetadata":"0",
                                            "marketId":"APT-USD"
                                         },
                                         {
                                            "id":"0d473eec-93b0-5c49-94ca-b8017454d769",
                                            "fee":"-0.001643",
                                            "side":"BUY",
                                            "size":"2",
                                            "type":"LIMIT",
                                            "price":"9.128",
                                            "orderId":"f7c9cd24-57cd-5240-a98d-3c9c3c11767d",
                                            "createdAt":"2024-05-06T18:41:20.606Z",
                                            "liquidity":"MAKER",
                                            "clientMetadata":"0",
                                            "marketId":"APT-USD"
                                         }
                                      ]
                                }
                            }
                        }
                    }
                }
                """.trimIndent(),
            )
        }
    }
}
